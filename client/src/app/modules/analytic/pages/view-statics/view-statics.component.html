<div class="my-4 space-y-4" *ngIf="url">
  <h1 class="text-poetsen-one text-3xl">View Statics</h1>
  <table class="border-spacing-1 sm:border-spacing-2 max-w-xl bg-white border border-separate border-gray-300 rounded-lg shadow-lg">
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Title</th>
      <td class="border-slate-300 text-primary px-4 py-2 font-semibold break-all border">{{ url.title }}</td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Origin Link</th>
      <td class="border-slate-300 px-4 py-2 break-all border">
        <a class="hover:underline hover:text-blue-500"
          [href]="url.origin_url">
          {{ url.origin_url }}
        </a>
      </td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Shortened Link</th>
      <td class="border-slate-300 px-4 py-2 break-all border">
        <a class="hover:underline hover:text-blue-500"
          [routerLink]="['/l', url.custom_back_half || url.back_half]">
          {{ url.client }}/l/{{ url.custom_back_half || url.back_half }}
        </a>
      </td>
    </tr>
    <tr *ngIf="url.custom_back_half">
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Alternative Link</th>
      <td class="border-slate-300 px-4 py-2 break-all border">
        <a class="hover:underline hover:text-blue-500"
          [routerLink]="['/l', url.back_half]">
          {{ url.client }}/l/{{ url.back_half }}
        </a>
      </td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Description</th>
      <td class="border-slate-300 px-4 py-2 break-all border">{{ url.description }}</td>
    </tr>

    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Active</th>
      <td class="border-slate-300 animate-pulse px-4 py-2 break-all border">
        {{ url.is_active ? 'ðŸŸ¢' : 'ðŸ”´' }}
      </td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Use Password</th>
      <td class="border-slate-300 flex items-center px-4 py-2 break-all border">
        <i *ngIf="url.use_password" class="icon-key text-xl text-yellow-600"></i>
        <i *ngIf="!url.use_password" class="icon-key-off text-xl text-gray-500"></i>
      </td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Total visited</th>
      <td class="border-slate-300 px-4 py-2 font-semibold text-blue-500 break-all border">
        {{ url.visited_by_desktop + url.visited_by_tablet + url.visited_by_mobile }}
      </td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Total redirected success</th>
      <td class="border-slate-300 text-secondary px-4 py-2 font-semibold break-all border">{{ url.redirect_success }}</td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Tags</th>
      <td class="border-slate-300 flex flex-wrap gap-2 px-4 py-2 break-all border">
        <ng-container *ngIf="tags.length > 0">
          <app-tag-badge
            *ngFor="let tag of url.tags"
            [tags]="tags"
            [targetTagId]="tag.tag_id"
          ></app-tag-badge>
        </ng-container>
      </td>
    </tr>
    <tr>
      <th class="sm:text-nowrap text-start border-slate-300 bg-slate-50 px-4 py-2 border">Created at</th>
      <td class="border-slate-300 px-4 py-2 break-all border">{{ url.created_at | date }}</td>
    </tr>
  </table>

  <hr class="w-11/12 mx-auto border border-gray-300">

  <div class="sm:flex-row sm:max-w-5xl md:gap-8 flex flex-col items-center gap-4 mx-auto">
    <div class="sm:w-1/2 space-y-2">
      <h6 class="text-rubik bg-slate-100 px-4 py-2 font-semibold text-center text-gray-600 border border-white rounded-md shadow-md select-none">Clicks & redirect success</h6>
      <canvas
        baseChart
        [type]="'doughnut'"
        [datasets]="[{
          label: 'Times',
          data: [url.visited_by_desktop + url.visited_by_tablet + url.visited_by_mobile, url.redirect_success]
        }]"
        [labels]="[
          'Clicked', 'Redirected success'
        ]"
        [legend]="true"
        [options]="{
          responsive: true
        }"
      >
      </canvas>
    </div>

    <div class="sm:w-1/2 space-y-2">
      <h6 class="text-rubik bg-slate-100 px-4 py-2 font-semibold text-center text-gray-600 border border-white rounded-md shadow-md select-none">Clicks by devices</h6>
      <canvas
        baseChart
        [type]="'polarArea'"
        [datasets]="[{
          label: 'Times',
          data: [url.visited_by_desktop, url.visited_by_tablet, url.visited_by_mobile]
        }]"
        [labels]="[
          'Desktop', 'Tablet', 'Mobile'
        ]"
        [legend]="true"
        [options]="{
          responsive: true
        }"
      >
      </canvas>
    </div>
  </div>
</div>
